/**
 * scrollable.js v1.0
 * Seamless scrolling for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * iScroll v4.1.6
 * Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

var Scrollable=function(A,q,U,t,u){function r(b){if(!b)return!1;try{return b instanceof Node||b instanceof HTMLElement}catch(a){}return"object"!==typeof b||"number"!==typeof b.nodeType||"string"!==typeof b.nodeName?!1:!0}function V(b,a,c){if(Array.prototype.forEach)Array.prototype.forEach.call(b,a,c);else for(var d=0,e=b.length;d<e;d++)d in b&&a.call(c,b[d],d,b)}function L(b){M?setTimeout(b,0):W.push(b)}function X(b){try{q.documentElement.doScroll("left")}catch(a){setTimeout(function(){X(b)},1);return}b()}
function I(b){function a(){if(b.dispatchEvent){var a=q.createEvent("MouseEvents");a.initMouseEvent("scroll",!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,null);b.dispatchEvent(a)}}if(!r(b))throw b+" is not a DOM element";if(!b._scrollable&&(b._scrollable=!0,b.style.overflow="scroll",b._scrollTop=function(a){if("undefined"===typeof a)return e?Math.max(-e.y,0):b.scrollTop;!J||B?b.scrollTop=a:L(function(){e.scrollTo(e.x,Math.max(-a,0),1)})},b._scrollLeft=function(a){if("undefined"===typeof a)return e?Math.max(-e.x,
0):b.scrollLeft;!J||B?b.scrollLeft=a:L(function(){e.scrollTo(Math.max(-a,0),e.y,1)})},J))if(B)b.style["-webkit-overflow-scrolling"]="touch";else{var c=q.createElement("div"),d=Array.prototype.slice.call(b.childNodes||[]);V(d,function(a){a=b.removeChild(a);c.appendChild(a)});b.appendChild(c);var e;b._iScroll=!0;L(function(){e=new Y(b,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,hScrollbar:!1,vScrollbar:!1,bounce:N,onBeforeScrollEnd:a,onScrollEnd:a})})}}function K(b){return r(b)&&b._iScroll?
b.childNodes[0]:b}var W=[],M=!1,B=!1,N=!1,l=navigator.userAgent,i,m,s;if(s=/\bCPU.*OS (\d+(_\d+)?)/i.exec(l))i="ios",m=s[1].replace("_",".");else if(s=/\bAndroid (\d+(\.\d+)?)/.exec(l))i="android",m=s[1];l={name:i,version:m&&A.parseFloat(m)};l[i]=!0;var J=!!l.name,Y;l.ios?5<=l.version?B=!0:N=!0:l.android&&(4<=l.version?B=!0:N=!1);if(!B&&J){var h=A,D=q;i=function(b){if(""===o)return b;b=b.charAt(0).toUpperCase()+b.substr(1);return o+b};var f=Math,l=D.createElement("div").style,o;a:{m=["t","webkitT",
"MozT","msT","OT"];var w;s=0;for(var fa=m.length;s<fa;s++)if(w=m[s]+"ransform",w in l){o=m[s].substr(0,m[s].length-1);break a}o=!1}var p=o?"-"+o.toLowerCase()+"-":"",v=i("transform"),ga=i("transitionProperty"),y=i("transitionDuration"),ha=i("transformOrigin"),ia=i("transitionTimingFunction"),O=i("transitionDelay"),P=/android/gi.test(navigator.appVersion),Z=/iphone|ipad/gi.test(navigator.appVersion);m=/hp-tablet/gi.test(navigator.appVersion);var aa=i("perspective")in l,n="ontouchstart"in h&&!m,ba=
!!o,ja=i("transition")in l,Q="onorientationchange"in h?"orientationchange":"resize",R=n?"touchstart":"mousedown",E=n?"touchmove":"mousemove",F=n?"touchend":"mouseup",G=n?"touchcancel":"mouseup",S="Moz"==o?"DOMMouseScroll":"mousewheel",z;z=!1===o?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[o];var ka=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||h.msRequestAnimationFrame||
function(b){return setTimeout(b,1)},ca=h.cancelRequestAnimationFrame||h.webkitCancelAnimationFrame||h.webkitCancelRequestAnimationFrame||h.mozCancelRequestAnimationFrame||h.oCancelRequestAnimationFrame||h.msCancelRequestAnimationFrame||clearTimeout,x=aa?" translateZ(0)":"";m=function(b,a){var c=this,d;c.wrapper="object"==typeof b?b:D.getElementById(b);c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,
useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:P,hideScrollbar:Z,fadeScrollbar:Z&&aa,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};
for(d in a)c.options[d]=a[d];c.x=c.options.x;c.y=c.options.y;c.options.useTransform=ba&&c.options.useTransform;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=c.options.useTransform&&c.options.zoom;c.options.useTransition=ja&&c.options.useTransition;c.options.zoom&&P&&(x="");c.scroller.style[ga]=c.options.useTransform?p+"transform":"top left";c.scroller.style[y]="0";c.scroller.style[ha]="0 0";c.options.useTransition&&
(c.scroller.style[ia]="cubic-bezier(0.33,0.66,0.66,1)");c.options.useTransform?c.scroller.style[v]="translate("+c.x+"px,"+c.y+"px)"+x:c.scroller.style.cssText+=";position:absolute;top:"+c.y+"px;left:"+c.x+"px";c.options.useTransition&&(c.options.fixedScrollbar=!0);c.refresh();c._bind(Q,h);c._bind(R);n||(c._bind("mouseout",c.wrapper),"none"!=c.options.wheelAction&&c._bind(S));c.options.checkDOMChanges&&(c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500))};m.prototype={enabled:!0,x:0,
y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){switch(b.type){case R:if(!n&&0!==b.button)break;this._start(b);break;case E:this._move(b);break;case F:case G:this._end(b);break;case Q:this._resize();break;case S:this._wheel(b);break;case "mouseout":this._mouseout(b);break;case z:this._transitionEnd(b)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&
this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(b){var a;this[b+"Scrollbar"]?(this[b+"ScrollbarWrapper"]||(a=D.createElement("div"),this.options.scrollbarClass?a.className=this.options.scrollbarClass+b.toUpperCase():a.style.cssText="position:absolute;z-index:100;"+("h"==b?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),a.style.cssText+=";pointer-events:none;"+p+
"transition-property:opacity;"+p+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(a),this[b+"ScrollbarWrapper"]=a,a=D.createElement("div"),this.options.scrollbarClass||(a.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+p+"background-clip:padding-box;"+p+"box-sizing:border-box;"+("h"==b?"height:100%":"width:100%")+";"+p+"border-radius:3px;border-radius:3px"),
a.style.cssText+=";pointer-events:none;"+p+"transition-property:"+p+"transform;"+p+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+p+"transition-duration:0;"+p+"transform: translate(0,0)"+x,this.options.useTransition&&(a.style.cssText+=";"+p+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[b+"ScrollbarWrapper"].appendChild(a),this[b+"ScrollbarIndicator"]=a),"h"==b?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=f.max(f.round(this.hScrollbarSize*
this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=f.max(f.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=
this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(b,!0)):this[b+"ScrollbarWrapper"]&&(ba&&(this[b+"ScrollbarIndicator"].style[v]=""),this[b+"ScrollbarWrapper"].parentNode.removeChild(this[b+"ScrollbarWrapper"]),this[b+"ScrollbarWrapper"]=null,this[b+"ScrollbarIndicator"]=null)},_resize:function(){var b=this;setTimeout(function(){b.refresh()},P?200:0)},_pos:function(b,a){this.zoomed||(b=this.hScroll?b:0,a=this.vScroll?
a:0,this.options.useTransform?this.scroller.style[v]="translate("+b+"px,"+a+"px) scale("+this.scale+")"+x:(b=f.round(b),a=f.round(a),this.scroller.style.left=b+"px",this.scroller.style.top=a+"px"),this.x=b,this.y=a,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(b,a){var c="h"==b?this.x:this.y;this[b+"Scrollbar"]&&(c*=this[b+"ScrollbarProp"],0>c?(this.options.fixedScrollbar||(c=this[b+"ScrollbarIndicatorSize"]+f.round(3*c),8>c&&(c=8),this[b+"ScrollbarIndicator"].style["h"==
b?"width":"height"]=c+"px"),c=0):c>this[b+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[b+"ScrollbarMaxScroll"]:(c=this[b+"ScrollbarIndicatorSize"]-f.round(3*(c-this[b+"ScrollbarMaxScroll"])),8>c&&(c=8),this[b+"ScrollbarIndicator"].style["h"==b?"width":"height"]=c+"px",c=this[b+"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-c))),this[b+"ScrollbarWrapper"].style[O]="0",this[b+"ScrollbarWrapper"].style.opacity=a&&this.options.hideScrollbar?"0":"1",this[b+"ScrollbarIndicator"].style[v]=
"translate("+("h"==b?c+"px,0)":"0,"+c+"px)")+x)},_start:function(b){var a=n?b.touches[0]:b,c,d;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&n&&1<b.touches.length&&(d=f.abs(b.touches[0].pageX-b.touches[1].pageX),c=f.abs(b.touches[0].pageY-b.touches[1].pageY),
this.touchesDistStart=f.sqrt(d*d+c*c),this.originX=f.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=f.abs(b.touches[0].pageY+b.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(c=getComputedStyle(this.scroller,null)[v].replace(/[^0-9\-.,]/g,"").split(","),d=1*c[4],c=1*c[5]):(d=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,
""),c=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),d!=this.x||c!=this.y))this.options.useTransition?this._unbind(z):ca(this.aniTime),this.steps=[],this._pos(d,c);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;this.pointY=a.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(E);this._bind(F);this._bind(G)}},_move:function(b){var a=n?b.touches[0]:b,c=a.pageX-
this.pointX,d=a.pageY-this.pointY,e=this.x+c,g=this.y+d,j=b.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,b);if(this.options.zoom&&n&&1<b.touches.length)e=f.abs(b.touches[0].pageX-b.touches[1].pageX),g=f.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDist=f.sqrt(e*e+g*g),this.zoomed=!0,a=1/this.touchesDistStart*this.touchesDist*this.scale,a<this.options.zoomMin?a=0.5*this.options.zoomMin*Math.pow(2,a/this.options.zoomMin):a>this.options.zoomMax&&
(a=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/a)),this.lastScale=a/this.scale,e=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[v]="translate("+e+"px,"+g+"px) scale("+a+")"+x,this.options.onZoom&&this.options.onZoom.call(this,b);else{this.pointX=a.pageX;this.pointY=a.pageY;if(0<e||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:0<=e||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=
this.options.bounce?this.y+d/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=c;this.distY+=d;this.absDistX=f.abs(this.distX);this.absDistY=f.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,d=0):this.absDistY>this.absDistX+5&&(e=this.x,c=0)),this.moved=!0,this._pos(e,g),this.dirX=0<c?-1:0>c?1:0,this.dirY=0<d?-1:0>d?1:0,300<j-this.startTime&&(this.startTime=j,this.startX=this.x,this.startY=this.y),
this.options.onScrollMove&&this.options.onScrollMove.call(this,b))}},_end:function(b){if(!(n&&0!==b.touches.length)){var a=this,c=n?b.changedTouches[0]:b,d,e,g={dist:0,time:0},j={dist:0,time:0},i=(b.timeStamp||Date.now())-a.startTime,k=a.x,h=a.y;a._unbind(E);a._unbind(F);a._unbind(G);a.options.onBeforeScrollEnd&&a.options.onBeforeScrollEnd.call(a,b);if(a.zoomed)k=a.scale*a.lastScale,k=Math.max(a.options.zoomMin,k),k=Math.min(a.options.zoomMax,k),a.lastScale=k/a.scale,a.scale=k,a.x=a.originX-a.originX*
a.lastScale+a.x,a.y=a.originY-a.originY*a.lastScale+a.y,a.scroller.style[y]="200ms",a.scroller.style[v]="translate("+a.x+"px,"+a.y+"px) scale("+a.scale+")"+x,a.zoomed=!1,a.refresh(),a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b);else{if(a.moved){if(300>i&&a.options.momentum){g=k?a._momentum(k-a.startX,i,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):g;j=h?a._momentum(h-a.startY,i,-a.y,0>a.maxScrollY?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):j;k=a.x+
g.dist;h=a.y+j.dist;if(0<a.x&&0<k||a.x<a.maxScrollX&&k<a.maxScrollX)g={dist:0,time:0};if(a.y>a.minScrollY&&h>a.minScrollY||a.y<a.maxScrollY&&h<a.maxScrollY)j={dist:0,time:0}}g.dist||j.dist?(g=f.max(f.max(g.time,j.time),10),a.options.snap&&(j=k-a.absStartX,i=h-a.absStartY,f.abs(j)<a.options.snapThreshold&&f.abs(i)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(j=a._snap(k,h),k=j.x,h=j.y,g=f.max(j.time,g))),a.scrollTo(f.round(k),f.round(h),g)):a.options.snap?(j=k-a.absStartX,i=h-a.absStartY,
f.abs(j)<a.options.snapThreshold&&f.abs(i)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(j=a._snap(a.x,a.y),(j.x!=a.x||j.y!=a.y)&&a.scrollTo(j.x,j.y,j.time))):a._resetPos(200)}else n&&(a.doubleTapTimer&&a.options.zoom?(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null,a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.zoom(a.pointX,a.pointY,1==a.scale?a.options.doubleTapZoom:1),a.options.onZoomEnd&&setTimeout(function(){a.options.onZoomEnd.call(a,b)},200)):this.options.handleClick&&
(a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;for(d=c.target;1!=d.nodeType;)d=d.parentNode;"SELECT"!=d.tagName&&"INPUT"!=d.tagName&&"TEXTAREA"!=d.tagName&&(e=D.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,b.view,1,c.screenX,c.screenY,c.clientX,c.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),e._fake=!0,d.dispatchEvent(e))},a.options.zoom?250:0))),a._resetPos(200);a.options.onTouchEnd&&a.options.onTouchEnd.call(a,b)}}},_resetPos:function(b){var a=0<=this.x?0:this.x<
this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(a==this.x&&c==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==o&&(this.hScrollbarWrapper.style[O]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==o&&(this.vScrollbarWrapper.style[O]="300ms"),
this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(a,c,b||0)},_wheel:function(b){var a=this,c,d;if("wheelDeltaX"in b)c=b.wheelDeltaX/12,d=b.wheelDeltaY/12;else if("wheelDelta"in b)c=d=b.wheelDelta/12;else if("detail"in b)c=d=3*-b.detail;else return;if("zoom"==a.options.wheelAction){if(d=a.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<a.options.zoomMin&&(d=a.options.zoomMin),d>a.options.zoomMax&&(d=a.options.zoomMax),d!=a.scale)!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,
b),a.wheelZoomCount++,a.zoom(b.pageX,b.pageY,d,400),setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b)},400)}else c=a.x+c,d=a.y+d,0<c?c=0:c<a.maxScrollX&&(c=a.maxScrollX),d>a.minScrollY?d=a.minScrollY:d<a.maxScrollY&&(d=a.maxScrollY),0>a.maxScrollY&&a.scrollTo(c,d,0)},_mouseout:function(b){var a=b.relatedTarget;if(a)for(;a=a.parentNode;)if(a==this.wrapper)return;this._end(b)},_transitionEnd:function(b){b.target==this.scroller&&(this._unbind(z),
this._startAni())},_startAni:function(){var b=this,a=b.x,c=b.y,d=Date.now(),e,g,j;b.animating||(b.steps.length?(e=b.steps.shift(),e.x==a&&e.y==c&&(e.time=0),b.animating=!0,b.moved=!0,b.options.useTransition)?(b._transitionTime(e.time),b._pos(e.x,e.y),b.animating=!1,e.time?b._bind(z):b._resetPos(0)):(j=function(){var h=Date.now(),i;h>=d+e.time?(b._pos(e.x,e.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni()):(h=(h-d)/e.time-1,g=f.sqrt(1-h*h),h=(e.x-a)*g+a,i=
(e.y-c)*g+c,b._pos(h,i),b.animating&&(b.aniTime=ka(j)))},j()):b._resetPos(400))},_transitionTime:function(b){b+="ms";this.scroller.style[y]=b;this.hScrollbar&&(this.hScrollbarIndicator.style[y]=b);this.vScrollbar&&(this.vScrollbarIndicator.style[y]=b)},_momentum:function(b,a,c,d,e){var a=f.abs(b)/a,g=a*a/0.0012;0<b&&g>c?(c+=e/(6/(6E-4*(g/a))),a=a*c/g,g=c):0>b&&g>d&&(d+=e/(6/(6E-4*(g/a))),a=a*d/g,g=d);return{dist:g*(0>b?-1:1),time:f.round(a/6E-4)}},_offset:function(b){for(var a=-b.offsetLeft,c=-b.offsetTop;b=
b.offsetParent;)a-=b.offsetLeft,c-=b.offsetTop;b!=this.wrapper&&(a*=this.scale,c*=this.scale);return{left:a,top:c}},_snap:function(b,a){var c,d,e;e=this.pagesX.length-1;c=0;for(d=this.pagesX.length;c<d;c++)if(b>=this.pagesX[c]){e=c;break}e==this.currPageX&&0<e&&0>this.dirX&&e--;b=this.pagesX[e];d=(d=f.abs(b-this.pagesX[this.currPageX]))?500*(f.abs(this.x-b)/d):0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;c++)if(a>=this.pagesY[c]){e=c;break}e==this.currPageY&&0<e&&0>this.dirY&&e--;a=this.pagesY[e];
c=(c=f.abs(a-this.pagesY[this.currPageY]))?500*(f.abs(this.y-a)/c):0;this.currPageY=e;e=f.round(f.max(d,c))||200;return{x:b,y:a,time:e}},_bind:function(b,a,c){(a||this.scroller).addEventListener(b,this,!!c)},_unbind:function(b,a,c){(a||this.scroller).removeEventListener(b,this,!!c)},destroy:function(){this.scroller.style[v]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(Q,h);this._unbind(R);this._unbind(E);this._unbind(F);this._unbind(G);this.options.hasTouch||
(this._unbind("mouseout",this.wrapper),this._unbind(S));this.options.useTransition&&this._unbind(z);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b,a,c,d=0;a=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=f.round(this.scroller.offsetWidth*
this.scale);this.scrollerH=f.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=
this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];c=this.scroller.querySelectorAll(this.options.snap);b=0;for(a=c.length;b<a;b++)d=this._offset(c[b]),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,this.pagesX[b]=d.left<this.maxScrollX?this.maxScrollX:d.left*this.scale,this.pagesY[b]=d.top<this.maxScrollY?this.maxScrollY:
d.top*this.scale}else if(this.options.snap){for(this.pagesX=[];d>=this.maxScrollX;)this.pagesX[a]=d,d-=this.wrapperW,a++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);a=d=0;for(this.pagesY=[];d>=this.maxScrollY;)this.pagesY[a]=d,d-=this.wrapperH,a++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");
this._scrollbar("v");this.zoomed||(this.scroller.style[y]="0",this._resetPos(200))},scrollTo:function(b,a,c,d){var e=b;this.stop();e.length||(e=[{x:b,y:a,time:c,relative:d}]);b=0;for(a=e.length;b<a;b++)e[b].relative&&(e[b].x=this.x-e[b].x,e[b].y=this.y-e[b].y),this.steps.push({x:e[b].x,y:e[b].y,time:e[b].time||0});this._startAni()},scrollToElement:function(b,a){var c;if(b=b.nodeType?b:this.scroller.querySelector(b))c=this._offset(b),c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=
0<c.left?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,a=void 0===a?f.max(2*f.abs(c.left),2*f.abs(c.top)):a,this.scrollTo(c.left,c.top,a)},scrollToPage:function(b,a,c){c=void 0===c?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)b="next"==b?this.currPageX+1:"prev"==b?this.currPageX-1:b,a="next"==a?this.currPageY+1:"prev"==a?this.currPageY-1:a,b=0>b?0:b>this.pagesX.length-
1?this.pagesX.length-1:b,a=0>a?0:a>this.pagesY.length-1?this.pagesY.length-1:a,this.currPageX=b,this.currPageY=a,b=this.pagesX[b],a=this.pagesY[a];else if(b*=-this.wrapperW,a*=-this.wrapperH,b<this.maxScrollX&&(b=this.maxScrollX),a<this.maxScrollY)a=this.maxScrollY;this.scrollTo(b,a,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(E);this._unbind(F);this._unbind(G)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):ca(this.aniTime);
this.steps=[];this.animating=this.moved=!1},zoom:function(b,a,c,d){var e=c/this.scale;this.options.useTransform&&(this.zoomed=!0,d=void 0===d?200:d,b=b-this.wrapperOffsetLeft-this.x,a=a-this.wrapperOffsetTop-this.y,this.x=b-b*e+this.x,this.y=a-a*e+this.y,this.scale=c,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[y]=d+"ms",this.scroller.style[v]="translate("+
this.x+"px,"+this.y+"px) scale("+c+")"+x,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};l=null;Y=m}var C=function(){M||(M=!0,V(W,function(b){setTimeout(b,0)}))};if("complete"===q.readyState)setTimeout(C,0);else if(q.addEventListener)q.addEventListener("DOMContentLoaded",C,!1),A.addEventListener("load",C,!1);else if(q.attachEvent){q.attachEvent("onreadystatechange",C);A.attachEvent("onload",C);w=!1;try{w=null===A.frameElement}catch(la){}q.documentElement.doScroll&&
w&&setTimeout(function(){X(C)},0)}w=function(){I.apply(this,arguments)};i=function(){I.apply(this,arguments)};U&&(i.node=function(){return K.apply(this,arguments)},U.plugin("scrollable",i));if(t){t.extend(t.fn,{scrollable:function(){this.forEach(function(b){I(b)});return this},scrollableNode:function(){return $(this.map(function(){return K(this)}))}});var H=t.fn.scrollTop,T=t.fn.scrollLeft;t.fn.scrollTop=function(b){if(typeof b==="undefined"){var a=this[0],c=r(a);return c&&a._scrollTop?a._scrollTop():
H?H.apply(this,arguments):c?a.scrollTop:null}this.forEach(function(a){var c=r(a);if(c&&a._scrollTop)a._scrollTop(b);else if(H)H.call(t(a),b);else if(c)a.scrollTop=b});return this};t.fn.scrollLeft=function(b){if(typeof b==="undefined"){var a=this[0],c=r(a);return c&&a._scrollLeft?a._scrollLeft():H?T.apply(this,arguments):c?a.scrollLeft:null}this.forEach(function(a){var c=r(a);if(c&&a._scrollLeft)a._scrollLeft(b);else if(T)T.call(t(a),b);else if(c)a.scrollLeft=b});return this}}if(u){u.fn.scrollable=
function(){this.each(function(){I(this)});return this};u.fn.scrollableNode=function(){return $(this.map(function(){return K(this)}))};var da=u.fn.scrollTop,ea=u.fn.scrollLeft;u.fn.scrollTop=function(b){if(typeof b==="undefined"){var a=this[0];return r(a)&&a._scrollTop?a._scrollTop():da.apply(this,arguments)}this.each(function(){r(this)&&this._scrollTop?this._scrollTop(b):da.call(u(this),b)});return this};u.fn.scrollLeft=function(b){if(typeof b==="undefined"){var a=this[0];return r(a)&&a._scrollLeft?
a._scrollLeft():ea.apply(this,arguments)}this.each(function(){r(this)&&this._scrollLeft?this._scrollLeft(b):ea.call(u(this),b)});return this}}w.node=function(){return K.apply(this,arguments)};return w}(window,document,window.clik,window.Zepto,window.jQuery);
